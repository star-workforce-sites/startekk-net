<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Admin Panel - Startekk</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%2384CC16' stroke-width='2'><path stroke-linecap='round' stroke-linejoin='round' d='M13 10V3L4 14h7v7l9-11h-7z'/></svg>">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'emerald': { 600: '#047857', 700: '#065f46' },
                        'lime': { 500: '#84CC16', 600: '#65a30d' }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50">
    <!-- Login Screen -->
    <div id="login-screen" class="min-h-screen flex items-center justify-center">
        <div class="max-w-md w-full bg-white rounded-xl shadow-lg p-8">
            <div class="text-center mb-8">
                <div class="w-16 h-16 mx-auto rounded-lg flex items-center justify-center mb-4" style="background: linear-gradient(135deg, #047857 0%, #84CC16 100%);">
                    <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                    </svg>
                </div>
                <h1 class="text-2xl font-bold text-gray-900">Admin Panel</h1>
                <p class="text-gray-600 mt-2">Job Board Management</p>
            </div>
            
            <form onsubmit="login(event)">
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                    <input type="email" id="login-email" value="info@startekk.net" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500" required>
                </div>
                
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                    <input type="password" id="login-password" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500" placeholder="Enter password" required>
                </div>
                
                <button type="submit" class="w-full py-3 bg-emerald-600 text-white rounded-lg font-semibold hover:bg-emerald-700 transition-colors">
                    Login
                </button>
            </form>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="admin-panel" class="hidden">
        <!-- Header -->
        <nav class="bg-emerald-600 shadow-lg">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 rounded-lg flex items-center justify-center" style="background: linear-gradient(135deg, #047857 0%, #84CC16 100%);">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                        <div>
                            <div class="text-xl font-bold text-white">Startekk Admin</div>
                            <div class="text-xs text-lime-300">Job Board Management</div>
                        </div>
                    </div>
                    <button onclick="logout()" class="px-4 py-2 bg-white text-emerald-600 rounded-lg font-semibold hover:bg-gray-100 transition-colors">
                        Logout
                    </button>
                </div>
            </div>
        </nav>

        <!-- Tabs -->
        <div class="bg-white border-b">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex space-x-8">
                    <button onclick="showTab('jobs')" id="tab-jobs" class="py-4 px-2 border-b-2 border-emerald-600 font-semibold text-emerald-600">
                        Job Listings <span id="job-count" class="ml-2 px-2 py-1 bg-emerald-100 text-emerald-800 text-xs rounded-full">0</span>
                    </button>
                    <button onclick="showTab('applications')" id="tab-applications" class="py-4 px-2 border-b-2 border-transparent font-semibold text-gray-500 hover:text-gray-700">
                        Applications <span id="app-count" class="ml-2 px-2 py-1 bg-red-500 text-white text-xs rounded-full">0</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Jobs Tab -->
        <div id="content-jobs" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-900">Manage Job Listings</h2>
                <button onclick="showAddJobModal()" class="px-6 py-3 bg-emerald-600 text-white rounded-lg font-semibold hover:bg-emerald-700 transition-colors">
                    + Add New Job
                </button>
            </div>

            <div class="bg-white rounded-xl shadow overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Job Title</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Location</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Salary</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Posted</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200" id="jobs-tbody">
                        <!-- Jobs loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Applications Tab -->
        <div id="content-applications" class="hidden max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-900">Job Applications</h2>
                <div class="flex space-x-2">
                    <select id="app-filter" onchange="filterApplications()" class="px-4 py-2 border rounded-lg">
                        <option value="all">All Applications</option>
                        <option value="new">New</option>
                        <option value="reviewing">Reviewing</option>
                        <option value="interview">Interview</option>
                        <option value="offer">Offer</option>
                        <option value="rejected">Rejected</option>
                    </select>
                    <button onclick="exportApplicationsCSV()" class="px-4 py-2 bg-gray-600 text-white rounded-lg font-semibold hover:bg-gray-700">
                        Export CSV
                    </button>
                </div>
            </div>

            <div id="applications-grid" class="grid gap-4">
                <!-- Applications loaded here -->
            </div>
        </div>
    </div>

    <!-- Edit Job Modal -->
    <div id="edit-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl shadow-2xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="sticky top-0 bg-emerald-600 text-white px-6 py-4 flex justify-between items-center">
                <h3 class="text-xl font-bold">Edit Job</h3>
                <button onclick="closeEditModal()" class="text-white hover:text-gray-200">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <form id="edit-form" class="p-6 space-y-4">
                <input type="hidden" id="edit-index">
                
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Job Title *</label>
                        <input type="text" id="edit-title" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Category *</label>
                        <select id="edit-category" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500">
                            <option value="Engineering">Engineering</option>
                            <option value="Product">Product</option>
                            <option value="Sales">Sales</option>
                            <option value="Operations">Operations</option>
                            <option value="Marketing">Marketing</option>
                            <option value="Design">Design</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Location *</label>
                        <input type="text" id="edit-location" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Level *</label>
                        <select id="edit-level" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500">
                            <option value="Entry">Entry</option>
                            <option value="Mid">Mid</option>
                            <option value="Senior">Senior</option>
                            <option value="Lead">Lead</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Salary Range *</label>
                        <select id="edit-salary-type" onchange="toggleCustomSalary('edit')" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 mb-2">
                            <option value="market">$ Market Rate</option>
                            <option value="competitive">$ Competitive</option>
                            <option value="commission">$ Salary + Commission</option>
                            <option value="not-disclosed">Not Disclosed</option>
                            <option value="custom">Custom Amount</option>
                        </select>
                        <input type="text" id="edit-salary-custom" placeholder="e.g., $90,000 - $120,000" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 hidden">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Posted Date *</label>
                        <input type="date" id="edit-posted" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500">
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Description *</label>
                    <textarea id="edit-description" required rows="4" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500"></textarea>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Requirements (one per line) *</label>
                    <textarea id="edit-requirements" required rows="4" placeholder="5+ years of experience&#10;Strong communication skills" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500"></textarea>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Tech Stack (comma-separated)</label>
                    <input type="text" id="edit-techstack" placeholder="React, Node.js, Python" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500">
                </div>
                
                <div class="flex justify-end space-x-3 pt-4 border-t">
                    <button type="button" onclick="closeEditModal()" class="px-6 py-2 border border-gray-300 rounded-lg font-semibold hover:bg-gray-50">
                        Cancel
                    </button>
                    <button type="submit" class="px-6 py-2 bg-emerald-600 text-white rounded-lg font-semibold hover:bg-emerald-700">
                        Save Changes
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Job Modal -->
    <div id="add-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl shadow-2xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="sticky top-0 bg-emerald-600 text-white px-6 py-4 flex justify-between items-center">
                <h3 class="text-xl font-bold">Add New Job</h3>
                <button onclick="closeAddModal()" class="text-white hover:text-gray-200">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <form id="add-form" class="p-6 space-y-4">
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Job Title *</label>
                        <input type="text" id="add-title" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Category *</label>
                        <select id="add-category" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500">
                            <option value="Engineering">Engineering</option>
                            <option value="Product">Product</option>
                            <option value="Sales">Sales</option>
                            <option value="Operations">Operations</option>
                            <option value="Marketing">Marketing</option>
                            <option value="Design">Design</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Location *</label>
                        <input type="text" id="add-location" required placeholder="e.g., Remote, Plano TX" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Level *</label>
                        <select id="add-level" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500">
                            <option value="Entry">Entry</option>
                            <option value="Mid">Mid</option>
                            <option value="Senior">Senior</option>
                            <option value="Lead">Lead</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Job Type *</label>
                        <select id="add-type" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500">
                            <option value="Full-time">Full-time</option>
                            <option value="Part-time">Part-time</option>
                            <option value="Contract">Contract</option>
                            <option value="Internship">Internship</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Salary Range *</label>
                        <select id="add-salary-type" onchange="toggleCustomSalary('add')" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 mb-2">
                            <option value="market">$ Market Rate</option>
                            <option value="competitive">$ Competitive</option>
                            <option value="commission">$ Salary + Commission</option>
                            <option value="not-disclosed">Not Disclosed</option>
                            <option value="custom">Custom Amount</option>
                        </select>
                        <input type="text" id="add-salary-custom" placeholder="e.g., $90,000 - $120,000" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500 hidden">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Posted Date *</label>
                        <input type="date" id="add-posted" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500">
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Description *</label>
                    <textarea id="add-description" required rows="3" placeholder="Brief job description..." class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500"></textarea>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Requirements (one per line) *</label>
                    <textarea id="add-requirements" required rows="5" placeholder="5+ years experience&#10;Strong technical skills&#10;Team player" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500"></textarea>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Tech Stack (comma separated) *</label>
                    <input type="text" id="add-techstack" required placeholder="React, Node.js, AWS, PostgreSQL" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-emerald-500">
                </div>
                
                <div class="flex justify-end space-x-3 pt-4 border-t">
                    <button type="button" onclick="closeAddModal()" class="px-6 py-2 border border-gray-300 rounded-lg font-semibold hover:bg-gray-50">
                        Cancel
                    </button>
                    <button type="submit" class="px-6 py-2 bg-emerald-600 text-white rounded-lg font-semibold hover:bg-emerald-700">
                        Add Job
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notification-container" style="position: fixed; top: 20px; right: 20px; z-index: 9999; max-width: 400px;"></div>

    <script>
        const ADMIN_PASSWORD = 'startekk2025';

        // ===== NOTIFICATION SYSTEM =====
        const notificationStyles = `<style>
.notification{background:linear-gradient(135deg,#047857 0%,#84CC16 100%);color:white;padding:16px 20px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.15);margin-bottom:12px;animation:slideIn 0.3s ease-out;cursor:pointer;transition:all 0.3s ease}
.notification:hover{transform:translateX(-5px);box-shadow:0 6px 16px rgba(0,0,0,0.2)}
.notification.error{background:linear-gradient(135deg,#DC2626 0%,#EF4444 100%)}
.notification-header{display:flex;align-items:center;gap:10px;font-weight:600;font-size:16px;margin-bottom:4px}
.notification-icon{width:24px;height:24px;flex-shrink:0}
.notification-message{font-size:14px;opacity:0.95;line-height:1.4}
.notification.closing{animation:slideOut 0.3s ease-in forwards}
@keyframes slideIn{from{transform:translateX(400px);opacity:0}to{transform:translateX(0);opacity:1}}
@keyframes slideOut{from{transform:translateX(0);opacity:1}to{transform:translateX(400px);opacity:0}}
</style>`;
        document.head.insertAdjacentHTML('beforeend',notificationStyles);
        const icons={success:'<svg class="notification-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',error:'<svg class="notification-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>'};
        function showNotification(options){const{type='success',title,message='',duration=4000}=options;const container=document.getElementById('notification-container');const notification=document.createElement('div');notification.className=`notification ${type}`;notification.innerHTML=`<div class="notification-header">${icons[type]}<span>${title}</span></div>${message?`<div class="notification-message">${message}</div>`:''}`;notification.onclick=()=>{notification.classList.add('closing');setTimeout(()=>notification.remove(),300)};container.appendChild(notification);if(duration>0)setTimeout(()=>{notification.classList.add('closing');setTimeout(()=>notification.remove(),300)},duration)}
        function showSuccess(title,message){return showNotification({type:'success',title,message})}
        function showError(title,message){return showNotification({type:'error',title,message})}


        // PRE-LOADED JOBS FROM PUBLIC PAGE
        const DEFAULT_JOBS = [
            {
                id: 'job-1',
                title: 'Senior Full Stack Engineer',
                category: 'Engineering',
                location: 'Remote',
                level: 'Senior',
                salary: '$140K-$180K',
                description: 'Lead development of our core platform using modern web technologies. Work with Product and Design to build scalable, user-friendly features.',
                requirements: ['5+ years full-stack development', 'Expert in React/Node.js', 'Strong system design skills', 'Experience with cloud platforms (AWS/GCP)', 'Excellent communication'],
                techStack: ['React', 'Node.js', 'TypeScript', 'PostgreSQL', 'AWS'],
                posted: '2025-01-15'
            },
            {
                id: 'job-2',
                title: 'DevOps Engineer',
                category: 'Engineering',
                location: 'Plano, TX',
                level: 'Mid',
                salary: '$110K-$140K',
                description: 'Build and maintain our CI/CD infrastructure. Optimize deployment processes and ensure system reliability.',
                requirements: ['3+ years DevOps experience', 'Strong Linux/Unix skills', 'Experience with Docker/Kubernetes', 'CI/CD pipeline expertise', 'Infrastructure as Code (Terraform/CloudFormation)'],
                techStack: ['Docker', 'Kubernetes', 'Jenkins', 'Terraform', 'AWS'],
                posted: '2025-01-20'
            },
            {
                id: 'job-3',
                title: 'AI/ML Engineer',
                category: 'Engineering',
                location: 'Remote',
                level: 'Senior',
                salary: '$150K-$190K',
                description: 'Develop and deploy AI models powering our intelligent automation products. Work on cutting-edge NLP and computer vision projects.',
                requirements: ['4+ years ML/AI experience', 'Strong Python skills', 'Experience with PyTorch/TensorFlow', 'Published research or production ML systems', 'MS/PhD in CS or related field'],
                techStack: ['Python', 'PyTorch', 'TensorFlow', 'AWS SageMaker', 'LangChain'],
                posted: '2025-01-18'
            },
            {
                id: 'job-4',
                title: 'Cloud Solutions Architect',
                category: 'Engineering',
                location: 'Remote',
                level: 'Lead',
                salary: '$160K-$200K',
                description: 'Design and implement scalable cloud architectures for enterprise clients. Lead technical engagements and mentor engineering teams.',
                requirements: ['7+ years cloud architecture experience', 'AWS/Azure/GCP certifications', 'Enterprise architecture patterns', 'Strong leadership skills', 'Customer-facing experience'],
                techStack: ['AWS', 'Azure', 'GCP', 'Terraform', 'Kubernetes'],
                posted: '2025-01-10'
            },
            {
                id: 'job-5',
                title: 'Frontend Engineer (React)',
                category: 'Engineering',
                location: 'Mysore, India',
                level: 'Mid',
                salary: '$50K-$70K',
                description: 'Build beautiful, responsive user interfaces for our SaaS products. Collaborate with global teams across time zones.',
                requirements: ['3+ years React development', 'Strong CSS/HTML skills', 'Experience with modern frontend tools', 'UI/UX sensibility', 'Remote work experience'],
                techStack: ['React', 'TypeScript', 'Tailwind CSS', 'Next.js', 'GraphQL'],
                posted: '2025-01-25'
            },
            {
                id: 'job-6',
                title: 'Backend Engineer (Python)',
                category: 'Engineering',
                location: 'Remote',
                level: 'Mid',
                salary: '$130K-$160K',
                description: 'Design and implement scalable backend services and APIs. Optimize database performance and ensure system reliability.',
                requirements: ['4+ years backend development', 'Expert Python skills', 'RESTful API design', 'Database optimization', 'Microservices architecture'],
                techStack: ['Python', 'FastAPI', 'PostgreSQL', 'Redis', 'Docker'],
                posted: '2025-01-22'
            },
            {
                id: 'job-7',
                title: 'Product Manager - AI Products',
                category: 'Product',
                location: 'Plano, TX',
                level: 'Senior',
                salary: '$120K-$150K',
                description: 'Own product strategy and roadmap for our AI-powered solutions. Work closely with engineering and design to deliver innovative products.',
                requirements: ['5+ years product management', 'Technical background (CS/Engineering)', 'Experience with AI/ML products', 'Strong analytical skills', 'Excellent stakeholder management'],
                techStack: [],
                posted: '2025-01-12'
            },
            {
                id: 'job-8',
                title: 'Sales Development Representative',
                category: 'Sales',
                location: 'Plano, TX',
                level: 'Entry',
                salary: '$60K-$80K + commission',
                description: 'Generate and qualify leads for our enterprise sales team. First point of contact for potential customers.',
                requirements: ['1-2 years sales experience', 'Excellent communication', 'Self-motivated', 'CRM proficiency', 'B2B SaaS interest'],
                techStack: [],
                posted: '2025-01-28'
            },
            {
                id: 'job-9',
                title: 'Customer Success Manager',
                category: 'Operations',
                location: 'Remote',
                level: 'Mid',
                salary: '$90K-$120K',
                description: 'Ensure customer satisfaction and drive product adoption. Build long-term relationships with enterprise clients.',
                requirements: ['3+ years customer success', 'SaaS experience', 'Strong problem-solving', 'Data-driven approach', 'Excellent communication'],
                techStack: [],
                posted: '2025-01-14'
            },
            {
                id: 'job-10',
                title: 'QA Automation Engineer',
                category: 'Engineering',
                location: 'Montreal, Canada',
                level: 'Mid',
                salary: 'CAD $90K-$120K',
                description: 'Build and maintain automated testing frameworks. Ensure product quality through comprehensive test coverage.',
                requirements: ['3+ years QA automation', 'Strong programming skills (Python/Java)', 'CI/CD integration experience', 'API testing', 'Performance testing'],
                techStack: ['Selenium', 'Cypress', 'Jest', 'Python', 'Jenkins'],
                posted: '2025-01-16'
            },
            {
                id: 'job-11',
                title: 'Security Engineer',
                category: 'Engineering',
                location: 'Remote',
                level: 'Senior',
                salary: '$140K-$170K',
                description: 'Protect our infrastructure and customer data. Implement security best practices and conduct security audits.',
                requirements: ['5+ years security engineering', 'Security certifications (CISSP/CEH)', 'Penetration testing experience', 'Cloud security expertise', 'Incident response skills'],
                techStack: ['AWS Security', 'SIEM', 'Vulnerability Scanning', 'IDS/IPS', 'OWASP'],
                posted: '2025-01-08'
            },
            {
                id: 'job-12',
                title: 'Data Engineer',
                category: 'Engineering',
                location: 'Plano, TX',
                level: 'Mid',
                salary: '$115K-$145K',
                description: 'Build and maintain data pipelines supporting analytics and ML models. Optimize data infrastructure for scale.',
                requirements: ['3+ years data engineering', 'Strong SQL skills', 'ETL/ELT experience', 'Big data technologies', 'Python proficiency'],
                techStack: ['Python', 'Spark', 'Airflow', 'Snowflake', 'dbt'],
                posted: '2025-01-11'
            }
        ];

        function login(event) {
            event.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            if (email === 'info@startekk.net' && password === ADMIN_PASSWORD) {
                document.getElementById('login-screen').classList.add('hidden');
                document.getElementById('admin-panel').classList.remove('hidden');
                
                // Initialize jobs on first login
                if (!localStorage.getItem('startekk_jobs')) {
                    localStorage.setItem('startekk_jobs', JSON.stringify(DEFAULT_JOBS));
                }
                
                loadJobs();
                loadApplications();
            } else {
                showError('Login Failed', 'Invalid email or password.');
            }
        }

        function logout() {
            document.getElementById('login-screen').classList.remove('hidden');
            document.getElementById('admin-panel').classList.add('hidden');
            document.getElementById('login-password').value = '';
        }

        function showTab(tab) {
            document.getElementById('tab-jobs').className = 'py-4 px-2 border-b-2 border-transparent font-semibold text-gray-500 hover:text-gray-700';
            document.getElementById('tab-applications').className = 'py-4 px-2 border-b-2 border-transparent font-semibold text-gray-500 hover:text-gray-700';
            document.getElementById(`tab-${tab}`).className = 'py-4 px-2 border-b-2 border-emerald-600 font-semibold text-emerald-600';
            
            document.getElementById('content-jobs').classList.add('hidden');
            document.getElementById('content-applications').classList.add('hidden');
            document.getElementById(`content-${tab}`).classList.remove('hidden');
        }

        function loadJobs() {
            let jobs = JSON.parse(localStorage.getItem('startekk_jobs') || '[]');

            // Migrate old salary format to new format
            let migrated = false;
            jobs = jobs.map(job => {
                if (job.salary && !job.salaryType) {
                    migrated = true;
                    return {
                        ...job,
                        salaryType: 'custom',
                        salaryCustom: job.salary
                    };
                }
                return job;
            });
            
            // Save migrated data back to localStorage
            if (migrated) {
                localStorage.setItem('startekk_jobs', JSON.stringify(jobs));
            }

            jobs.sort((a, b) => new Date(b.posted) - new Date(a.posted)); // Sort by date (newest first)
            document.getElementById('job-count').textContent = jobs.length;
            
            const tbody = document.getElementById('jobs-tbody');
            tbody.innerHTML = '';
            
            if (jobs.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" class="px-6 py-8 text-center text-gray-500">No jobs posted yet. Click "Add New Job" to create one.</td></tr>';
                return;
            }
            
            jobs.forEach((job, index) => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">${job.title}</div>
                        <div class="text-sm text-gray-500">${job.level}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 py-1 text-xs font-semibold rounded-full bg-emerald-100 text-emerald-800">${job.category}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${job.location}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${(() => {
                        if (!job.salaryType) return job.salary || 'N/A';
                        const map = {
                            'market': '$ Market Rate',
                            'competitive': '$ Competitive',
                            'commission': '$ Salary + Commission',
                            'not-disclosed': 'Not Disclosed',
                            'custom': job.salaryCustom || job.salary || 'N/A'
                        };
                        return map[job.salaryType] || 'N/A';
                    })()}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${job.posted}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button onclick="editJob(${index})" class="text-emerald-600 hover:text-emerald-900 mr-3">Edit</button>
                        <button onclick="deleteJob(${index})" class="text-red-600 hover:text-red-900">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function editJob(index) {
            const jobs = JSON.parse(localStorage.getItem('startekk_jobs') || '[]');

            // Migrate old salary format to new format
            jobs = jobs.map(job => {
                if (job.salary && !job.salaryType) {
                    return {
                        ...job,
                        salaryType: 'custom',
                        salaryCustom: job.salary
                    };
                }
                return job;
            });

            const job = jobs[index];
            
            document.getElementById('edit-index').value = index;
            document.getElementById('edit-title').value = job.title;
            document.getElementById('edit-category').value = job.category;
            document.getElementById('edit-location').value = job.location;
            document.getElementById('edit-level').value = job.level;
            // Load salary data
            if (job.salaryType) {
                document.getElementById('edit-salary-type').value = job.salaryType;
                if (job.salaryType === 'custom') {
                    document.getElementById('edit-salary-custom').value = job.salaryCustom || '';
                    document.getElementById('edit-salary-custom').classList.remove('hidden');
                } else {
                    document.getElementById('edit-salary-custom').classList.add('hidden');
                }
            } else {
                // Backward compatibility - migrate old salary field
                if (job.salary) {
                    document.getElementById('edit-salary-type').value = 'custom';
                    document.getElementById('edit-salary-custom').value = job.salary;
                    document.getElementById('edit-salary-custom').classList.remove('hidden');
                }
            }
            document.getElementById('edit-posted').value = job.posted;
            document.getElementById('edit-description').value = job.description;
            const reqArray = job.requirements || [];
            document.getElementById('edit-requirements').value = reqArray.join('\n');
            const techArray = job.techStack || job.tech || [];
            document.getElementById('edit-techstack').value = techArray.join(', ');
            
            document.getElementById('edit-modal').classList.remove('hidden');
        }

        function closeEditModal() {
            document.getElementById('edit-modal').classList.add('hidden');
        }

        document.getElementById('edit-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const index = parseInt(document.getElementById('edit-index').value);
            const jobs = JSON.parse(localStorage.getItem('startekk_jobs') || '[]');

            // Migrate old salary format to new format
            jobs = jobs.map(job => {
                if (job.salary && !job.salaryType) {
                    return {
                        ...job,
                        salaryType: 'custom',
                        salaryCustom: job.salary
                    };
                }
                return job;
            });

            
            jobs[index] = {
                id: jobs[index].id,
                title: document.getElementById('edit-title').value,
                category: document.getElementById('edit-category').value,
                location: document.getElementById('edit-location').value,
                level: document.getElementById('edit-level').value,
                salaryType: document.getElementById('edit-salary-type').value,
                salaryCustom: document.getElementById('edit-salary-custom').value,
                posted: document.getElementById('edit-posted').value,
                description: document.getElementById('edit-description').value,
                requirements: document.getElementById('edit-requirements').value.split('\n').filter(r => r.trim()),
                techStack: document.getElementById('edit-techstack').value.split(',').map(t => t.trim()).filter(t => t)
            };
            
            localStorage.setItem('startekk_jobs', JSON.stringify(jobs));
            loadJobs();
            closeEditModal();
            
            showSuccess('Job Updated!', 'Changes saved successfully.');
        });

        function deleteJob(index) {
            if (confirm('Are you sure you want to delete this job? This will remove it from the public job board.')) {
                const jobs = JSON.parse(localStorage.getItem('startekk_jobs') || '[]');

            // Migrate old salary format to new format
            jobs = jobs.map(job => {
                if (job.salary && !job.salaryType) {
                    return {
                        ...job,
                        salaryType: 'custom',
                        salaryCustom: job.salary
                    };
                }
                return job;
            });

                jobs.splice(index, 1);
                localStorage.setItem('startekk_jobs', JSON.stringify(jobs));
                loadJobs();
            }
        }

        function showAddJobModal() {
            // Set default posted date to today
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('add-posted').value = today;
            
            // Clear form
            document.getElementById('add-form').reset();
            document.getElementById('add-posted').value = today; // Reset clears it, set again
            
            // Show modal
            document.getElementById('add-modal').classList.remove('hidden');
        }

        function closeAddModal() {
            document.getElementById('add-modal').classList.add('hidden');
            document.getElementById('add-form').reset();
        }

        function loadApplications() {
            const applications = JSON.parse(localStorage.getItem('startekk_applications') || '[]');
            document.getElementById('app-count').textContent = applications.filter(a => a.status === 'new').length;
            
            const grid = document.getElementById('applications-grid');
            grid.innerHTML = '';
            
            if (applications.length === 0) {
                grid.innerHTML = '<div class="bg-white rounded-xl shadow p-8 text-center text-gray-500">No applications yet. Applications will appear here once users apply for jobs.</div>';
                return;
            }
            
            applications.forEach((app, index) => {
                const card = document.createElement('div');
                card.className = 'bg-white rounded-xl shadow p-6';
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h3 class="text-lg font-bold text-gray-900">${app.applicantName}</h3>
                            <p class="text-emerald-600 font-semibold">${app.jobTitle}</p>
                        </div>
                        <span class="px-3 py-1 rounded-full text-xs font-semibold ${getStatusColor(app.status)}">${app.status.toUpperCase()}</span>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4 text-sm mb-4">
                        <div>
                            <p class="text-gray-500">Email</p>
                            <p class="font-medium"><a href="mailto:${app.applicantEmail}" class="text-emerald-600 hover:underline">${app.applicantEmail}</a></p>
                        </div>
                        <div>
                            <p class="text-gray-500">Phone</p>
                            <p class="font-medium">${app.applicantPhone}</p>
                        </div>
                        <div>
                            <p class="text-gray-500">Start Date</p>
                            <p class="font-medium">${app.startDate}</p>
                        </div>
                        <div>
                            <p class="text-gray-500">Salary</p>
                            <p class="font-medium">${app.salaryExpectation}</p>
                        </div>
                    </div>
                    
                    ${app.linkedinUrl && app.linkedinUrl !== 'Not provided' ? `<p class="text-sm mb-2"><a href="${app.linkedinUrl}" target="_blank" class="text-emerald-600 hover:underline">ðŸ“Ž LinkedIn Profile</a></p>` : ''}
                    ${app.portfolioUrl && app.portfolioUrl !== 'Not provided' ? `<p class="text-sm mb-2"><a href="${app.portfolioUrl}" target="_blank" class="text-emerald-600 hover:underline">ðŸ“Ž Portfolio</a></p>` : ''}
                    
                    <div class="bg-gray-50 p-3 rounded-lg mb-4">
                        <p class="text-xs text-gray-500 mb-1">Resume</p>
                        <p class="text-sm font-medium">ðŸ“„ ${app.resumeFilename}</p>
                        <p class="text-xs text-gray-500 mt-2">Submitted: ${new Date(app.submittedAt).toLocaleString()}</p>
                        <p class="text-xs text-emerald-600 mt-1">âœ… Sent to info@startekk.net</p>
                    </div>
                    
                    <div class="flex space-x-2">
                        <select onchange="updateApplicationStatus(${index}, this.value)" class="flex-1 px-3 py-2 border rounded-lg text-sm">
                            <option value="new" ${app.status === 'new' ? 'selected' : ''}>New</option>
                            <option value="reviewing" ${app.status === 'reviewing' ? 'selected' : ''}>Reviewing</option>
                            <option value="interview" ${app.status === 'interview' ? 'selected' : ''}>Interview</option>
                            <option value="offer" ${app.status === 'offer' ? 'selected' : ''}>Offer</option>
                            <option value="rejected" ${app.status === 'rejected' ? 'selected' : ''}>Rejected</option>
                        </select>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function getStatusColor(status) {
            const colors = {
                'new': 'bg-red-100 text-red-800',
                'reviewing': 'bg-yellow-100 text-yellow-800',
                'interview': 'bg-blue-100 text-blue-800',
                'offer': 'bg-green-100 text-green-800',
                'rejected': 'bg-gray-100 text-gray-800'
            };
            return colors[status] || 'bg-gray-100 text-gray-800';
        }

        function updateApplicationStatus(index, newStatus) {
            const applications = JSON.parse(localStorage.getItem('startekk_applications') || '[]');
            applications[index].status = newStatus;
            localStorage.setItem('startekk_applications', JSON.stringify(applications));
            loadApplications();
        }

        function filterApplications() {
            // Filter implementation
            loadApplications();
        }

        function exportApplicationsCSV() {
            const applications = JSON.parse(localStorage.getItem('startekk_applications') || '[]');
            
            if (applications.length === 0) {
                showError('No Data', 'There are no applications to export.');
                return;
            }
            
            const headers = ['Name', 'Email', 'Phone', 'Job Title', 'Status', 'Resume', 'Submitted'];
            const rows = applications.map(app => [
                app.applicantName,
                app.applicantEmail,
                app.applicantPhone,
                app.jobTitle,
                app.status,
                app.resumeFilename,
                new Date(app.submittedAt).toLocaleString()
            ]);
            
            let csv = headers.join(',') + '\n';
            rows.forEach(row => {
                csv += row.map(cell => `"${cell}"`).join(',') + '\n';
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `applications-${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
        }

        window.storeApplication = function(appData) {
            const applications = JSON.parse(localStorage.getItem('startekk_applications') || '[]');
            applications.unshift(appData);
            localStorage.setItem('startekk_applications', JSON.stringify(applications));
        };

        // Handle add job form submission
        document.addEventListener('DOMContentLoaded', function() {
            const addForm = document.getElementById('add-form');
            if (addForm) {
                addForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const jobs = JSON.parse(localStorage.getItem('startekk_jobs') || '[]');

            // Migrate old salary format to new format
            jobs = jobs.map(job => {
                if (job.salary && !job.salaryType) {
                    return {
                        ...job,
                        salaryType: 'custom',
                        salaryCustom: job.salary
                    };
                }
                return job;
            });

                    
                    // Generate new ID (max existing ID + 1)
                    const maxId = jobs.length > 0 ? Math.max(...jobs.map(j => parseInt(j.id) || j.id)) : 0;
                    
                    const newJob = {
                        id: maxId + 1,
                        title: document.getElementById('add-title').value,
                        category: document.getElementById('add-category').value,
                        location: document.getElementById('add-location').value,
                        level: document.getElementById('add-level').value,
                        type: document.getElementById('add-type').value,
                        salaryType: document.getElementById('add-salary-type').value,
                salaryCustom: document.getElementById('add-salary-custom').value,
                        posted: document.getElementById('add-posted').value,
                        description: document.getElementById('add-description').value,
                        requirements: document.getElementById('add-requirements').value.split('\n').filter(r => r.trim()),
                        techStack: document.getElementById('add-techstack').value.split(',').map(t => t.trim()).filter(t => t),
                        tech: document.getElementById('add-techstack').value.split(',').map(t => t.trim()).filter(t => t) // Alias for compatibility
                    };
                    
                    jobs.push(newJob);
                    localStorage.setItem('startekk_jobs', JSON.stringify(jobs));
                    
                    loadJobs();
                    closeAddModal();
                    
                    showSuccess('Job Added Successfully!', `"${newJob.title}" is now live on the job board.`);
                });
            }
        });
    
        // Toggle custom salary input visibility
        function toggleCustomSalary(prefix) {
            const type = document.getElementById(`${prefix}-salary-type`).value;
            const customField = document.getElementById(`${prefix}-salary-custom`);
            
            if (type === 'custom') {
                customField.classList.remove('hidden');
                customField.required = true;
            } else {
                customField.classList.add('hidden');
                customField.required = false;
                customField.value = '';
            }
        }

    </script>
</body>
</html>
