<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookie Consent Banner - StartTekk</title>
</head>
<body>
<!-- 
COOKIE CONSENT BANNER COMPONENT
================================
Include this script in the <head> of ALL pages on both sites.
Auto-detects domain and loads correct Google Analytics ID.

USAGE:
Add this line before </head> tag on every page:
<script src="/legal/cookie-consent-banner.html"></script>

Or copy the entire script below into each page's <head>.
-->

<script>
(function() {
    'use strict';
    
    // Check if user has already made a choice
    const cookieConsent = localStorage.getItem('cookie_consent');
    
    // Detect which site we're on and set GA ID
    const hostname = window.location.hostname;
    let GA_ID;
    
    if (hostname.includes('starworkforce')) {
        GA_ID = 'G-W3QGRJGB6M'; // StarWorkforce GA ID
    } else {
        GA_ID = 'G-8BFZG3R9ZR'; // StartTekk GA ID (default)
    }
    
    // If user has consented, load Google Analytics
    if (cookieConsent === 'accepted') {
        loadGoogleAnalytics();
    }
    
    // If no consent decision yet, show banner
    if (!cookieConsent) {
        showCookieBanner();
    }
    
    function loadGoogleAnalytics() {
        // Load Google Analytics script
        const script1 = document.createElement('script');
        script1.async = true;
        script1.src = `https://www.googletagmanager.com/gtag/js?id=${GA_ID}`;
        document.head.appendChild(script1);
        
        // Initialize Google Analytics
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', GA_ID, {
            'anonymize_ip': true,
            'cookie_flags': 'SameSite=None;Secure'
        });
        
        console.log('Google Analytics loaded:', GA_ID);
    }
    
    function showCookieBanner() {
        // Create banner HTML
        const banner = document.createElement('div');
        banner.id = 'cookie-consent-banner';
        banner.innerHTML = `
            <div style="position: fixed; bottom: 0; left: 0; right: 0; background: linear-gradient(135deg, #1f2937 0%, #111827 100%); color: white; padding: 20px; box-shadow: 0 -4px 20px rgba(0,0,0,0.3); z-index: 9999; font-family: system-ui, -apple-system, sans-serif;">
                <div style="max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 16px;">
                    <div style="flex: 1; min-width: 300px;">
                        <p style="margin: 0 0 8px 0; font-size: 16px; font-weight: 600;">üç™ We use cookies</p>
                        <p style="margin: 0; font-size: 14px; color: #d1d5db; line-height: 1.5;">
                            We use cookies to improve your experience and analyze site traffic. 
                            <a href="/legal/cookie-policy.html" style="color: #84CC16; text-decoration: underline;">Learn more</a>
                        </p>
                    </div>
                    <div style="display: flex; gap: 12px; flex-wrap: wrap;">
                        <button onclick="acceptCookies()" style="background: linear-gradient(135deg, #047857 0%, #84CC16 100%); color: white; border: none; padding: 12px 24px; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: transform 0.2s;">
                            Accept All
                        </button>
                        <button onclick="declineCookies()" style="background: #374151; color: white; border: none; padding: 12px 24px; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: transform 0.2s;">
                            Decline
                        </button>
                        <button onclick="manageCookies()" style="background: transparent; color: white; border: 2px solid #4b5563; padding: 12px 24px; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s;">
                            Manage
                        </button>
                    </div>
                </div>
            </div>
        `;
        
        document.body.appendChild(banner);
        
        // Add button hover effects
        const buttons = banner.querySelectorAll('button');
        buttons.forEach(btn => {
            btn.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-2px)';
            });
            btn.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });
    }
    
    // Make functions globally accessible
    window.acceptCookies = function() {
        localStorage.setItem('cookie_consent', 'accepted');
        localStorage.setItem('analytics_cookies', 'true');
        document.getElementById('cookie-consent-banner').remove();
        loadGoogleAnalytics();
    };
    
    window.declineCookies = function() {
        localStorage.setItem('cookie_consent', 'declined');
        localStorage.setItem('analytics_cookies', 'false');
        document.getElementById('cookie-consent-banner').remove();
    };
    
    window.manageCookies = function() {
        // Redirect to cookie policy page
        window.location.href = '/legal/cookie-policy.html';
    };
    
})();
</script>

<!-- 
IMPLEMENTATION INSTRUCTIONS
===========================

METHOD 1: Include as external script
-------------------------------------
Add to <head> of all pages:
<script src="/legal/cookie-consent-banner.html"></script>

METHOD 2: Inline in each page
------------------------------
Copy the entire <script> block above and paste into <head> of each page.

FEATURES:
---------
‚úÖ Auto-detects startekk.net vs starworkforce.net
‚úÖ Loads correct Google Analytics ID per site
‚úÖ GDPR compliant (requires consent before tracking)
‚úÖ Saves preference to localStorage
‚úÖ Accept / Decline / Manage buttons
‚úÖ Links to cookie policy
‚úÖ Anonymizes IP addresses
‚úÖ Responsive design
‚úÖ Professional styling

GOOGLE ANALYTICS IDS:
---------------------
StartTekk: G-8BFZG3R9ZR
StarWorkforce: G-W3QGRJGB6M

TESTING:
--------
1. Clear localStorage
2. Reload page
3. Banner should appear
4. Click Accept
5. Check browser console: "Google Analytics loaded: G-..."
6. Reload page - banner should not reappear

CUSTOMIZATION:
--------------
- Colors: Edit gradient colors in banner HTML
- Text: Edit cookie message text
- Position: Change 'bottom' to 'top' for top banner
- Buttons: Edit button text and styling
-->

</body>
</html>
